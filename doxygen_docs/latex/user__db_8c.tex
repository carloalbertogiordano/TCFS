\doxysection{daemon/daemon\+\_\+utils/common\+\_\+utils/db/user\+\_\+db.c File Reference}
\hypertarget{user__db_8c}{}\label{user__db_8c}\index{daemon/daemon\_utils/common\_utils/db/user\_db.c@{daemon/daemon\_utils/common\_utils/db/user\_db.c}}


This file contains the functions to interact with the database.  


{\ttfamily \#include "{}user\+\_\+db.\+h"{}}\newline
{\ttfamily \#include "{}redis.\+h"{}}\newline
Include dependency graph for user\+\_\+db.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{user__db_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{user__db_8c_a2ae8a82033440194ad80949cd4493971}{register\+\_\+user}} (\mbox{\hyperlink{structqm__user}{qm\+\_\+user}} \texorpdfstring{$\ast$}{*}user\+\_\+msg)
\begin{DoxyCompactList}\small\item\em Register or update a user in the db, this relies on the \doxylink{redis_8c}{redis.\+c} file. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{user__db_8c_a6e2fcf4aa637e61f69b1b601981663cf}{unregister\+\_\+user}} (pid\+\_\+t pid)
\begin{DoxyCompactList}\small\item\em Remove a user from the DB. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{user__db_8c_ab57ffd0f0b23a847e766e762906af22e}{disconnect\+\_\+db}} (void)
\begin{DoxyCompactList}\small\item\em Free the context of the DB. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the functions to interact with the database. 



Definition in file \mbox{\hyperlink{user__db_8c_source}{user\+\_\+db.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{user__db_8c_ab57ffd0f0b23a847e766e762906af22e}\label{user__db_8c_ab57ffd0f0b23a847e766e762906af22e} 
\index{user\_db.c@{user\_db.c}!disconnect\_db@{disconnect\_db}}
\index{disconnect\_db@{disconnect\_db}!user\_db.c@{user\_db.c}}
\doxysubsubsection{\texorpdfstring{disconnect\_db()}{disconnect\_db()}}
{\footnotesize\ttfamily void disconnect\+\_\+db (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Free the context of the DB. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
If this fails no errors will be printed and no errno will be set, you are on your own \+:( 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{user__db_8c_source_l00045}{45}} of file \mbox{\hyperlink{user__db_8c_source}{user\+\_\+db.\+c}}.



References \mbox{\hyperlink{redis_8c_source_l00092}{free\+\_\+context()}}, and \mbox{\hyperlink{print__utils_8c_source_l00101}{print\+\_\+msg()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{user__db_8c_ab57ffd0f0b23a847e766e762906af22e_cgraph}
\end{center}
\end{figure}
\Hypertarget{user__db_8c_a2ae8a82033440194ad80949cd4493971}\label{user__db_8c_a2ae8a82033440194ad80949cd4493971} 
\index{user\_db.c@{user\_db.c}!register\_user@{register\_user}}
\index{register\_user@{register\_user}!user\_db.c@{user\_db.c}}
\doxysubsubsection{\texorpdfstring{register\_user()}{register\_user()}}
{\footnotesize\ttfamily int register\+\_\+user (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structqm__user}{qm\+\_\+user}} \texorpdfstring{$\ast$}{*}}]{user\+\_\+msg }\end{DoxyParamCaption})}



Register or update a user in the db, this relies on the \doxylink{redis_8c}{redis.\+c} file. 


\begin{DoxyParams}{Parameters}
{\em qm\+\_\+user\texorpdfstring{$\ast$}{*}} & A pointer to the allocated qm\+\_\+user\texorpdfstring{$\ast$}{*} struct \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if successful, 0 otherwise. An error might be printen by \doxylink{print__utils_8c_a650ab060ffe5dbc6c1a968a9cae3bded}{print\+\_\+err()} function, 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\doxylink{print__utils_8c_a650ab060ffe5dbc6c1a968a9cae3bded}{print\+\_\+err} 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{user__db_8c_source_l00015}{15}} of file \mbox{\hyperlink{user__db_8c_source}{user\+\_\+db.\+c}}.



References \mbox{\hyperlink{redis_8c_source_l00072}{init\+\_\+context()}}, \mbox{\hyperlink{redis_8c_source_l00211}{insert()}}, \mbox{\hyperlink{redis_8c_source_l00042}{print\+\_\+all\+\_\+keys()}}, and \mbox{\hyperlink{print__utils_8c_source_l00101}{print\+\_\+msg()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{user__db_8c_a2ae8a82033440194ad80949cd4493971_cgraph}
\end{center}
\end{figure}
\Hypertarget{user__db_8c_a6e2fcf4aa637e61f69b1b601981663cf}\label{user__db_8c_a6e2fcf4aa637e61f69b1b601981663cf} 
\index{user\_db.c@{user\_db.c}!unregister\_user@{unregister\_user}}
\index{unregister\_user@{unregister\_user}!user\_db.c@{user\_db.c}}
\doxysubsubsection{\texorpdfstring{unregister\_user()}{unregister\_user()}}
{\footnotesize\ttfamily int unregister\+\_\+user (\begin{DoxyParamCaption}\item[{pid\+\_\+t}]{pid }\end{DoxyParamCaption})}



Remove a user from the DB. 


\begin{DoxyParams}{Parameters}
{\em pid\+\_\+t} & pid the key \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if successful, 0 otherwise. An error might be printen by \doxylink{print__utils_8c_a650ab060ffe5dbc6c1a968a9cae3bded}{print\+\_\+err()} function, 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\doxylink{print__utils_8c_a650ab060ffe5dbc6c1a968a9cae3bded}{print\+\_\+err} 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{user__db_8c_source_l00031}{31}} of file \mbox{\hyperlink{user__db_8c_source}{user\+\_\+db.\+c}}.



References \mbox{\hyperlink{redis_8c_source_l00042}{print\+\_\+all\+\_\+keys()}}, \mbox{\hyperlink{print__utils_8c_source_l00101}{print\+\_\+msg()}}, and \mbox{\hyperlink{redis_8c_source_l00256}{remove\+\_\+by\+\_\+pid()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{user__db_8c_a6e2fcf4aa637e61f69b1b601981663cf_cgraph}
\end{center}
\end{figure}
